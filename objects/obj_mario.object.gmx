<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>mask_mario</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>z = (instance_place(x, y, par_floor)).z
xspeed = 0
yspeed = 0
zspeed = 0
grav = 0
index = 0
xscale = 1
angle = 0
ground = 1
zprev = z
zfloor = z
hp = 20
maxhp = 20
newpowerup = 0
oldpowerup = 0
showpowerup = -1
timer_powerup = 8
invincible = 0
vis = 1
atk = 2
atk_start = atk
def = 0
def_start = 0
step = 0
height = 24
cangethit = 1
bonbon_pow = 0
bonbon_def = 0
move = 1
fdir = 0
yyspeed = 0
donthide = 0
flying = 0
underground = 0
digging = 0
digrot = 0
ice = 0
drawz = 0
drawzadd = 0
mydirt = -4
doalign = 0
skip = 0
canmove = 1
stone = 0
throwrock = 0
hasrock = 0
acc = 0.5
spd = 1.4
tex = tex_mario;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>move = 1
zspeed = -4
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var ID;
ID = instance_create(x, y, obj_fade_out)
ID.rm = -1
ID.sprite = spr_star_logo;
if (global.World == -1)
    ID.rm = 3
if (global.Powerup == 0)
    tex = tex_mario_back;
if (global.Powerup == 1)
    tex = tex_fire_mario_back;
if (global.Powerup == 2)
    tex = tex_dandelion_mario_back;
if (global.Powerup == 3)
    tex = tex_mole_mario_back;
if (global.Powerup == 4)
    tex = tex_super_mole_mario_back;
yyspeed = -0.5
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (timer_def &gt; 0)
{
    timer_def -= 1
    bonbon_def = (!bonbon_def)
    alarm[4] = 4
}
else
{
    bonbon_def = 0
    def = def_start
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (timer_pow &gt; 0)
{
    timer_pow -= 1
    bonbon_pow = (!bonbon_pow)
    alarm[3] = 4
}
else
{
    bonbon_pow = 0
    atk = atk_start
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>z = (instance_place(x, y, par_floor)).z
zprev = z
zfloor = z
obj_cp.activated = 1
if instance_exists(obj_autoscroll)
{
    obj_autoscroll.x = x
    obj_autoscroll.phase = 1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (timer_flash &gt; 0)
{
    timer_flash -= 1
    vis = (!vis)
    alarm[1] = 5
}
else
{
    vis = 1
    invincible = 0
    timer_flash = 15
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (timer_powerup &gt; 0)
{
    if (showpowerup == newpowerup)
        showpowerup = oldpowerup
    else
        showpowerup = newpowerup
    timer_powerup -= 1
    alarm[0] = 5
}
else
{
    showpowerup = -1
    timer_powerup = 8
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var ID, groundprev, ID2, doit, i, ID3;
if (!underground)
{
    if (!skip)
    {
        find_zfloor()
        ID = instance_find_top(x, y, obj_sp_0)
        if ID
            zfloor += max(0, ID.zspeed)
    }
    else
        skip = 0
}
ID = instance_place(x, y, obj_rail_platform)
if ID
{
    if (z &lt;= (ID.z + 4) &amp;&amp; zprev &gt; (ID.z - 12) &amp;&amp; (!(place_meeting(x, y, par_floorwalls))))
    {
        zfloor = ID.z - (lengthdir_y((x - (ID.x + ID.width)), ID.rot))
        if ground
            z = zfloor
    }
}
ID = instance_find_top(x, y, obj_thwomp)
if ID
{
    if (z &gt; (ID.z + ID.height * 0.5))
        zfloor = ID.z + ID.height
}
if (room == rm_w2_4 &amp;&amp; zfloor &lt; -32)
    zfloor = -32
drawzfloor = zfloor
ID = instance_place(x, y, obj_flipswitch)
if ID
{
    if (drawzfloor &lt; (ID.zz + ID.height))
        drawzfloor = ID.zz + ID.height
}
ID = instance_place(x, y, obj_bridge_switch)
if ID
{
    if (drawzfloor &lt; (ID.z + ID.zz))
        drawzfloor = ID.z + ID.zz
}
ID = instance_place(x, y, obj_spring_platform)
if ID
{
    if (drawzfloor &lt; (ID.z + ID.height * 0.5 + ID.height * ID.scale) &amp;&amp; (z + height) &gt; (ID.z + ID.height))
        drawzfloor = ID.z + ID.height * 0.5 + ID.height * ID.scale
}
ID = instance_place(x, y, obj_ring_burner)
if ID
{
    if (drawzfloor &lt; ID.zz)
        drawzfloor = ID.zz
}
groundprev = ground
if (z &lt;= zfloor)
{
    z = zfloor
    zspeed = 0
    ground = 1
    flying = 0
    if ((!canmove) &amp;&amp; global.Bgm == 62)
        canmove = 1
    if (grav != 0)
    {
        ID = instance_place(x, y, obj_grid_0)
        if (ID &amp;&amp; zfloor == ID.z)
            play_sfx(sfx_step_grid)
        else
            play_sfx(sfx_step)
    }
    grav = 0
    if digging
    {
        digging = 0
        atk -= (2 + 1 * (global.Powerup == 4))
        atk_start -= (2 + 1 * (global.Powerup == 4))
        if mole_check_candig()
        {
            underground = 1
            drawz -= 2
            mydirt = instance_create(x, (y - 0.1), obj_dirthole)
            mydirt.z = z
            mydirt.attached = 1
            mydirt.alarm[0] = -1
            mydirt.alarm[1] = -1
            mydirt.tex = 156
        }
    }
}
else
{
    ground = 0
    grav = 0.35
    if (flying == 1)
        grav = 0.1
    if (global.World == 13)
        grav *= 0.25
}
if (ground != groundprev)
    index = 0
if instance_exists(mydirt)
{
    if mydirt.attached
    {
        mydirt.x = x
        mydirt.y = y - 0.1
    }
}
if (room != rm_w4_fb)
{
    ID = instance_place(x, y, obj_thwomp)
    if (!ID)
        ID = instance_place(x, y, obj_king_thwomp)
}
else
    ID = instance_find_bottom(x, y, obj_giant_bowser_rock)
if (ID &amp;&amp; (!underground))
{
    if (z &lt;= (ID.z + ID.height) &amp;&amp; (z + height) &gt;= ID.z)
    {
        if (zprev &gt;= (ID.z + ID.height * 0.5))
        {
            if (room == rm_w1_4)
            {
                zspeed = 5
                if (global.Powerup != 4)
                    global.Powerup = 0
                invincible = 1
                timer_flash = 15
                hp -= max(0, (4 - def))
                ID2 = instance_create(x, y, obj_damage_star)
                ID2.z = z
                ID2.hurtplayer = 1
                ID2.damage = max(0, (4 - def))
                with (ID2)
                    event_user(0)
                alarm[1] = 5
                play_sfx(sfx_damage)
            }
        }
        else
        {
            doit = 1
            if (ID.object_index == obj_giant_bowser_rock)
            {
                if (ID.phase == 4)
                    doit = 0
            }
            if doit
            {
                z = max((ID.z - height), zfloor)
                zspeed = (min(ID.zspeed, 0)) - 1
            }
            if (ground &amp;&amp; move &amp;&amp; doit)
            {
                doit = 1
                if (drawz != 0)
                    doit = 0
                if doit
                {
                    tex = 40
                    move = 0
                    if (global.Powerup != 4)
                        global.Powerup = 0
                    invincible = 1
                    timer_flash = 15
                    hp -= max(0, (ID.atk - def))
                    if (ID.object_index == obj_giant_bowser_rock)
                        ID.unfold = 1
                    ID2 = instance_create(x, y, obj_damage_star)
                    ID2.z = z
                    ID2.hurtplayer = 1
                    ID2.damage = max(0, (ID.atk - def))
                    with (ID2)
                        event_user(0)
                    alarm[1] = 5
                    play_sfx(sfx_damage)
                }
            }
            if throwrock
            {
                throwrock = 0
                hasrock = 1
                ID.phase = 4
            }
        }
    }
    else if (!move)
        move = 1
}
if (underground || (!move))
    exit
ID = instance_find_top_from_z(x, y, (z + height), par_block)
if ID
{
    if (z &lt;= (ID.z + ID.height) &amp;&amp; zprev &gt;= (ID.z + ID.height))
    {
        z = ID.z + ID.height
        if (ID.object_index == obj_spring_platform)
        {
            zspeed = 4 + 4 * key_check(global.Key_jump)
            ID.bounce = 1
            ID.alarm[0] = 8
            audio_stop_sound(sfx_step)
            play_sfx(sfx_bounce)
        }
    }
    if ((z + height) &gt; ID.z &amp;&amp; zspeed &gt; 0 &amp;&amp; (zprev + height) &lt;= ID.z)
    {
        z = ID.z - height
        zspeed = 0
    }
}
ID = instance_find_top(x, y, obj_grid_0)
if ID
{
    if ((z + height) &gt; (ID.z - ID.height) &amp;&amp; zspeed &gt; 0 &amp;&amp; zprev &lt;= (ID.z - ID.height))
    {
        z = ID.z - ID.height - height
        zspeed = 0
        play_sfx(sfx_step_grid)
    }
}
ID = instance_place(x, y, obj_coin)
if ID
{
    if (z &lt; (ID.z + 12) &amp;&amp; (z + height) &gt; ID.z)
    {
        global.Coins += 1
        ID2 = instance_create(ID.x, ID.y, obj_fx)
        ID2.z = ID.z
        ID2.tex = 153
        with (ID2)
            event_user(0)
        with (ID)
            instance_destroy()
        play_sfx(sfx_coin)
    }
}
ID = instance_place(x, y, obj_mushroom)
if ID
{
    if (z &lt; (ID.z + 20) &amp;&amp; (z + height) &gt; ID.z)
    {
        with (ID)
            instance_destroy()
        hp = min(maxhp, (hp + 10))
        play_sfx(sfx_heal)
        for (i = 0; i &lt; 4; i += 1)
        {
            ID = instance_create(x, y, obj_heart)
            ID.dir = i * 90
            ID.scale = 1
        }
        for (i = 0; i &lt; 4; i += 1)
        {
            ID = instance_create(x, y, obj_heart)
            ID.dir = 45 + i * 90
            ID.scale = 1.5
        }
    }
}
ID = instance_place(x, y, obj_1up_mushroom)
if ID
{
    if (z &lt; (ID.z + 20) &amp;&amp; (z + height) &gt; ID.z)
    {
        with (ID)
            instance_destroy()
        global.Tries += 1
        play_sfx(sfx_1up)
        ID = instance_create(x, y, obj_1up)
        ID.z = z
    }
}
ID = instance_place(x, y, obj_fire_flower)
if ID
{
    if (z &lt; (ID.z + 20) &amp;&amp; (z + height) &gt; ID.z)
    {
        with (ID)
            instance_destroy()
        oldpowerup = global.Powerup
        global.Powerup = 1
        newpowerup = global.Powerup
        showpowerup = 1
        timer_powerup = 8
        alarm[0] = 5
        play_sfx(sfx_flower)
    }
}
ID = instance_place(x, y, obj_dandelion)
if ID
{
    if (z &lt; (ID.z + 20) &amp;&amp; (z + height) &gt; ID.z)
    {
        with (ID)
            instance_destroy()
        oldpowerup = global.Powerup
        global.Powerup = 2
        newpowerup = global.Powerup
        showpowerup = 2
        timer_powerup = 8
        alarm[0] = 5
        play_sfx(sfx_flower)
    }
}
ID = instance_place(x, y, obj_molesuit)
if ID
{
    if (z &lt; (ID.z + 20) &amp;&amp; (z + height) &gt; ID.z)
    {
        with (ID)
            instance_destroy()
        if (global.Powerup != 4)
        {
            oldpowerup = global.Powerup
            global.Powerup = 3
            newpowerup = global.Powerup
            showpowerup = 3
            timer_powerup = 8
            alarm[0] = 5
        }
        play_sfx(sfx_flower)
    }
}
ID = instance_place(x, y, obj_super_molesuit)
if ID
{
    if (z &lt; (ID.z + 20) &amp;&amp; (z + height) &gt; ID.z)
    {
        with (ID)
            instance_destroy()
        oldpowerup = global.Powerup
        global.Powerup = 4
        newpowerup = global.Powerup
        showpowerup = 4
        timer_powerup = 8
        alarm[0] = 5
        play_sfx(sfx_flower)
    }
}
ID = instance_place(x, y, obj_greenstar)
if ID
{
    if (z &lt; (ID.z + 16) &amp;&amp; (z + height) &gt; ID.z &amp;&amp; (!ID.activated))
    {
        obj_hud.greenstars[ID.index] = 1
        ID.activated = 1
        ID.alarm[0] = 60
        play_sfx(sfx_greenstar)
        if (obj_hud.greenstars[0] &amp;&amp; obj_hud.greenstars[1] &amp;&amp; obj_hud.greenstars[2])
        {
            global.Tries += 1
            play_sfx(sfx_1up)
            ID = instance_create(x, y, obj_1up)
            ID.z = z
        }
    }
}
ID = instance_place(x, y, obj_bonbon)
if ID
{
    if (z &lt; (ID.z + 20) &amp;&amp; (z + height) &gt; ID.z)
    {
        if (ID.index == 0)
        {
            atk = atk_start + 2
            bonbon_pow = 1
            timer_pow = 60
            alarm[3] = 720
        }
        else
        {
            def = def_start + 1
            bonbon_def = 1
            timer_def = 60
            alarm[4] = 720
        }
        play_sfx(sfx_heal)
        for (i = 0; i &lt; 4; i += 1)
        {
            ID2 = instance_create(x, y, obj_heart)
            ID2.dir = i * 90
            ID2.scale = 1
            ID2.tex = sprite_get_texture(tex_flowerpoint, ID.index)
        }
        for (i = 0; i &lt; 4; i += 1)
        {
            ID2 = instance_create(x, y, obj_heart)
            ID2.dir = 45 + i * 90
            ID2.scale = 1.5
            ID2.tex = sprite_get_texture(tex_flowerpoint, ID.index)
        }
        with (ID)
            instance_destroy()
    }
}
ID = instance_place(x, y, obj_cp)
if ID
{
    if (z &lt; (ID.z + 32) &amp;&amp; (z + height) &gt; ID.z &amp;&amp; (!ID.activated))
    {
        ID.activated = 1
        global.Cp = 1
        play_sfx(sfx_cp)
        for (i = 0; i &lt; 3; i += 1)
            obj_gcontrol.greenstars[i] = obj_hud.greenstars[i]
    }
}
ID = instance_find_top_from_z(x, y, (z + height), par_enemy)
if ID
{
    if (ID.object_index == obj_koopa)
    {
        if (z &lt; (ID.z + ID.height) &amp;&amp; zprev &gt;= (ID.z + ID.height) &amp;&amp; (ID.weakstomp || (stone &amp;&amp; ID.weakstone)))
        {
            ID.hp -= max(0, (atk - ID.def))
            z = ID.z + ID.height
            zspeed = 3 + 2 * key_check(global.Key_jump)
            ID2 = instance_create(ID.x, ID.y, obj_damage_star)
            ID2.z = ID.z + ID.height
            ID2.damage = max(0, (atk - ID.def))
            with (ID2)
                event_user(0)
            if (ID.hp &lt;= 0)
            {
                with (ID)
                    event_user(0)
            }
            else
            {
                with (ID)
                {
                    instance_destroy()
                    ID3 = instance_create(x, y, obj_koopa_shell)
                    ID3.z = z
                    ID3.hp = hp
                    with (ID3)
                        event_user(0)
                }
            }
            if digging
            {
                digging = 0
                stone = 0
                atk -= (2 + 1 * (global.Powerup == 4))
                atk_start -= (2 + 1 * (global.Powerup == 4))
            }
            play_sfx(sfx_stomp)
        }
        else if (z &lt; (ID.z + ID.height) &amp;&amp; (z + 24) &gt; ID.z &amp;&amp; (!invincible))
        {
            if (global.Powerup != 4)
                global.Powerup = 0
            invincible = 1
            timer_flash = 15
            hp -= max(0, (ID.atk - def))
            ID2 = instance_create(x, y, obj_damage_star)
            ID2.z = z
            ID2.hurtplayer = 1
            ID2.damage = max(0, (ID.atk - def))
            with (ID2)
                event_user(0)
            alarm[1] = 5
            play_sfx(sfx_damage)
        }
    }
    else if (ID.object_index != obj_hazerblade_small)
    {
        if (z &lt; (ID.z + ID.height) &amp;&amp; zprev &gt;= (ID.z + ID.height) &amp;&amp; (ID.weakstomp || (stone &amp;&amp; ID.weakstone)))
        {
            ID.hp -= max(0, (atk - ID.def))
            z = ID.z + ID.height
            zspeed = 3 + 2 * key_check(global.Key_jump)
            if (global.World == 13)
                zspeed = 1.5 + 2 * key_check(global.Key_jump)
            ID2 = instance_create(ID.x, ID.y, obj_damage_star)
            ID2.z = ID.z + ID.height
            ID2.damage = max(0, (atk - ID.def))
            with (ID2)
                event_user(0)
            if (ID.hp &lt;= 0)
            {
                with (ID)
                    event_user(0)
            }
            if digging
            {
                digging = 0
                stone = 0
                atk -= (2 + 1 * (global.Powerup == 4))
                atk_start -= (2 + 1 * (global.Powerup == 4))
            }
            play_sfx(sfx_stomp)
        }
        else if (z &lt; (ID.z + ID.height) &amp;&amp; (z + 24) &gt; ID.z &amp;&amp; (!invincible))
        {
            if (global.Powerup != 4)
                global.Powerup = 0
            invincible = 1
            timer_flash = 15
            hp -= max(0, (ID.atk - def))
            ID2 = instance_create(x, y, obj_damage_star)
            ID2.z = z
            ID2.hurtplayer = 1
            ID2.damage = max(0, (ID.atk - def))
            with (ID2)
                event_user(0)
            alarm[1] = 5
            play_sfx(sfx_damage)
            if place_meeting(x, y, obj_bowser)
            {
                xspeed = -4
                zspeed = 5
                canmove = 0
            }
        }
    }
    else if ID.col
    {
        if (z &lt; (ID.z + ID.height) &amp;&amp; zprev &gt;= (ID.z + ID.height) &amp;&amp; (ID.weakstomp || (stone &amp;&amp; ID.weakstone)))
        {
            ID.hp -= max(0, (atk - ID.def))
            z = ID.z + ID.height
            zspeed = 3 + 2 * key_check(global.Key_jump)
            ID2 = instance_create(ID.x, ID.y, obj_damage_star)
            ID2.z = ID.z + ID.height
            ID2.damage = max(0, (atk - ID.def))
            with (ID2)
                event_user(0)
            if (ID.hp &lt;= 0)
            {
                with (ID)
                    event_user(0)
            }
            if digging
            {
                digging = 0
                stone = 0
                atk -= (2 + 1 * (global.Powerup == 4))
                atk_start -= (2 + 1 * (global.Powerup == 4))
            }
            play_sfx(sfx_stomp)
        }
        else if (z &lt; (ID.z + ID.height) &amp;&amp; (z + 24) &gt; ID.z &amp;&amp; (!invincible))
        {
            if (global.Powerup != 4)
                global.Powerup = 0
            invincible = 1
            timer_flash = 15
            hp -= max(0, (ID.atk - def))
            ID2 = instance_create(x, y, obj_damage_star)
            ID2.z = z
            ID2.hurtplayer = 1
            ID2.damage = max(0, (ID.atk - def))
            with (ID2)
                event_user(0)
            alarm[1] = 5
            play_sfx(sfx_damage)
        }
    }
}
ID = instance_place(x, y, obj_koopa_shell)
if ID
{
    if (ID.kicked != 2)
    {
        if (z &lt; (ID.z + ID.height) &amp;&amp; zprev &gt;= (ID.z + ID.height) &amp;&amp; ID.kicked == 1)
        {
            ID.hp -= atk
            z = ID.z + ID.height
            zspeed = 3 + 2 * key_check(global.Key_jump)
            ID2 = instance_create(ID.x, ID.y, obj_damage_star)
            ID2.z = ID.z + ID.height
            ID2.damage = atk
            with (ID2)
                event_user(0)
            if (ID.hp &lt;= 0)
            {
                with (ID)
                    event_user(1)
            }
            else
            {
                with (ID)
                {
                    kicked = 0
                    dir = 0
                    spd = 0
                    timer_comeout = 60
                    alarm[2] = 360
                }
            }
            play_sfx(sfx_stomp)
        }
        else if (z &lt; (ID.z + ID.height) &amp;&amp; (z + 24) &gt; ID.z &amp;&amp; (!invincible) &amp;&amp; ID.kicked == 1 &amp;&amp; cangethit)
        {
            if (global.Powerup != 4)
                global.Powerup = 0
            invincible = 1
            timer_flash = 15
            cangethit = 0
            hp -= max(0, (ID.atk - def))
            ID2 = instance_create(x, y, obj_damage_star)
            ID2.z = z
            ID2.hurtplayer = 1
            ID2.damage = max(0, (ID.atk - def))
            with (ID2)
                event_user(0)
            alarm[1] = 5
            play_sfx(sfx_damage)
        }
        else if (z &lt; (ID.z + ID.height) &amp;&amp; (z + 24) &gt; ID.z &amp;&amp; ID.kicked == 0)
        {
            cangethit = 0
            ID.kicked = 2
            ID.dir = point_direction(x, y, ID.x, ID.y)
            ID.spd = 2
            ID.timer_comeout = -1
            ID.shakex = 0
            ID.shakey = 0
            ID.alarm[0] = 15
            ID.alarm[2] = -1
            play_sfx(sfx_stomp)
        }
    }
}
ID = instance_find_top_from_z(x, y, (z + height), par_hurt)
if ID
{
    if (z &lt; (ID.z + ID.height) &amp;&amp; (z + 24) &gt; ID.z &amp;&amp; ID.hurt &amp;&amp; (!invincible))
    {
        if (global.Powerup != 4)
            global.Powerup = 0
        invincible = 1
        timer_flash = 15
        hp -= max(0, (ID.atk - def))
        ID2 = instance_create(x, y, obj_damage_star)
        ID2.z = z
        ID2.hurtplayer = 1
        ID2.damage = max(0, (ID.atk - def))
        with (ID2)
            event_user(0)
        alarm[1] = 5
        play_sfx(sfx_damage)
    }
}
ID = instance_place(x, y, obj_loco_poco)
if ID
{
    if (z &lt; (ID.z + 28 + 20 * ID.segments) &amp;&amp; (!invincible))
    {
        if (global.Powerup != 4)
            global.Powerup = 0
        invincible = 1
        timer_flash = 15
        hp -= max(0, (ID.atk - def))
        ID2 = instance_create(x, y, obj_damage_star)
        ID2.z = z
        ID2.hurtplayer = 1
        ID2.damage = max(0, (ID.atk - def))
        with (ID2)
            event_user(0)
        alarm[1] = 5
        play_sfx(sfx_damage)
    }
}
ID = instance_place(x, y, obj_hazerblade)
if ID
{
    if (z &lt; (ID.z + ID.height) &amp;&amp; (z + height) &gt; ID.z &amp;&amp; (!invincible))
    {
        if (global.Powerup != 4)
            global.Powerup = 0
        invincible = 1
        timer_flash = 15
        hp -= max(0, (ID.atk - def))
        ID2 = instance_create(x, y, obj_damage_star)
        ID2.z = z
        ID2.hurtplayer = 1
        ID2.damage = max(0, (ID.atk - def))
        with (ID2)
            event_user(0)
        alarm[1] = 5
        play_sfx(sfx_damage)
    }
}
ID = instance_place(x, y, obj_toad)
if (ID &amp;&amp; place_meeting(x, y, obj_wall))
{
    if (z &lt;= (ID.z + ID.height) &amp;&amp; zprev &gt; ID.z)
    {
        z = ID.z + ID.height
        zspeed = 4
        if digging
        {
            digging = 0
            stone = 0
            atk -= (2 + 1 * (global.Powerup == 4))
            atk_start -= (2 + 1 * (global.Powerup == 4))
        }
        play_sfx(sfx_stomp)
    }
}
if (global.Powerup != 3 &amp;&amp; global.Powerup != 4 &amp;&amp; digging)
{
    digging = 0
    stone = 0
    atk -= (2 + 1 * (global.Powerup == 4))
    atk_start -= (2 + 1 * (global.Powerup == 4))
}
ID = instance_place(x, y, obj_skychanger)
if ID
{
    obj_cam.texsky = background_get_texture(tex_w9_sky_dark)
    with (ID)
        instance_destroy()
    instance_create(0, 0, obj_rain)
}
ID = wall_find_lowest_from_z(x, y, z)
if ID
{
    if ((z + height) &gt; ID.bottom &amp;&amp; zspeed &gt; 0 &amp;&amp; (zprev + height) &lt;= ID.bottom)
    {
        z = ID.bottom - height
        zspeed = 0
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var doit, ID, xaxis, yaxis, tdir, maxxspd, maxyspd, addx, addy;
if (key_check(global.Key_left) &amp;&amp; (!key_check(global.Key_right)) &amp;&amp; (!digging) &amp;&amp; (move || doalign))
    xscale = -1
if (key_check(global.Key_right) &amp;&amp; (!key_check(global.Key_left)) &amp;&amp; (!digging) &amp;&amp; (move || doalign))
    xscale = 1
if (angle != 180 &amp;&amp; xscale == -1)
    angle += 9
if (angle != 0 &amp;&amp; xscale == 1)
    angle -= 9
doit = 0
if instance_exists(obj_autoscroll)
{
    if (abs(x - obj_autoscroll.x) &gt; 128)
        doit = 1
    if (z &lt;= -32)
        doit = 1
}
if (z &lt; -128 || hp &lt;= 0 || doit || (obj_hud.time == 0 &amp;&amp; global.World != -1) || (z &lt; -16 &amp;&amp; (global.World == 3 || global.World == 12 || global.World == 15)))
{
    if (z &lt; -128 || (z &lt; -16 &amp;&amp; (global.World == 3 || global.World == 12 || global.World == 15)))
    {
        if (global.World == 3 || global.World == 12 || global.World == 15)
            z = -15.9
        play_sfx(sfx_damage)
    }
    obj_hud.hp = 0
    instance_destroy()
    global.Powerup = 0
    global.Tries -= 1
    ID = instance_create(x, y, obj_mario_die)
    ID.z = z
    if underground
        ID.visible = false
    with (ID)
        event_user(0)
}
if (digging || (underground &amp;&amp; drawz != ((-height) - 4)))
    digrot -= (xscale * 18)
else
{
    digrot = 0
    throwrock = 0
}
if (!move)
{
    y += yyspeed
    step += abs(yyspeed)
    if (step &gt; 24)
    {
        step -= 24
        play_sfx(sfx_step)
    }
    exit
}
spd = 1.4 + 0.6 * key_check(global.Key_run)
tacc = acc - acc * 0.8 * ice
if underground
    spd = 0.75
if (underground &amp;&amp; global.Powerup == 4)
    spd = 1.4
if hasrock
    spd = 0.75
if (drawz != 0 &amp;&amp; drawz != ((-height) - 4))
    spd = 0
xaxis = (-key_check(global.Key_left)) + key_check(global.Key_right)
yaxis = (-key_check(global.Key_up)) + key_check(global.Key_down)
tdir = point_direction(0, 0, xaxis, yaxis)
if (!canmove)
{
    xaxis = -1
    yaxis = 0
    tdir = 180
}
if (xaxis != 0 || yaxis != 0)
{
    xspeed += lengthdir_x(tacc, (tdir + obj_cam.camdir - 270))
    yspeed += lengthdir_y(tacc, (tdir + obj_cam.camdir - 270))
}
else
{
    xspeed *= (0.5 * (1 + 0.9 * ice))
    yspeed *= (0.5 * (1 + 0.9 * ice))
}
if (xaxis == 0 &amp;&amp; yaxis == 0)
{
    if (!((global.Powerup == 2 &amp;&amp; (!ground))))
        index = 0
}
maxxspd = lengthdir_x(spd, (tdir + obj_cam.camdir - 270))
maxyspd = lengthdir_y(spd, (tdir + obj_cam.camdir - 270))
if (point_distance(0, 0, xspeed, yspeed) &gt; spd)
{
    tdir = point_direction(0, 0, xspeed, yspeed)
    xspeed = lengthdir_x(spd, tdir)
    yspeed = lengthdir_y(spd, tdir)
}
if digging
{
    xspeed = 0
    yspeed = 0
}
addx = 1
addy = 1
if (!underground)
{
    if wall_detect((x + xspeed), y)
        addx = 0
    if wall_detect(x, (y + yspeed))
        addy = 0
    if (wall_detect((x + xspeed), (y + yspeed)) &amp;&amp; addx &amp;&amp; addy)
    {
        addx = 0
        addy = 0
    }
}
else
{
    if (!(mole_check_canmove((x + xspeed), y)))
        addx = 0
    if (!(mole_check_canmove(x, (y + yspeed))))
        addy = 0
}
if addx
    x += xspeed
if addy
    y += yspeed
if (xspeed != 0 || yspeed != 0)
    fdir = point_direction(0, 0, xspeed, yspeed)
if (key_check_pressed(global.Key_jump) &amp;&amp; collision_point(bbox_left, bbox_top, obj_door, 0, 0) &amp;&amp; collision_point(bbox_right, bbox_bottom, obj_door, 0, 0) &amp;&amp; ground &amp;&amp; (!underground) &amp;&amp; drawz == 0)
{
    obj_door.destrot = 135
    move = 0
    switch global.Powerup
    {
        case 0:
            tex = tex_mario;
            break
        case 1:
            tex = tex_fire_mario;
            break
        case 2:
            tex = tex_dandelion_mario;
            break
        case 3:
            tex = tex_mole_mario;
            break
        case 4:
            tex = tex_super_mole_mario;
            break
    }

    index = 0
    donthide = 1
    keyboard_clear(global.Key_jump)
    alarm[5] = 120
    audio_stop_all()
    play_sfx(sfx_door)
    with (obj_autoscroll)
        instance_destroy()
}
if (key_check_pressed(global.Key_jump) &amp;&amp; global.Powerup == 2 &amp;&amp; (!ground))
{
    if (flying == 0)
        zspeed = 2
    flying = 1
}
if ((!key_check(global.Key_jump)) &amp;&amp; flying)
    flying = 2
if (global.Powerup != 2)
    flying = 0
if (flying == 1)
{
    if (zspeed &lt; -1)
        zspeed = -1
    if place_meeting(x, y, obj_propeller_gray)
    {
        ID = instance_find_top_from_z(x, y, z, obj_propeller_gray)
        if ID
        {
            if (z &gt; ID.z &amp;&amp; z &lt; (ID.z + ID.windheight) &amp;&amp; zspeed &lt; 1)
                zspeed += 0.2
        }
    }
}
if (key_check_pressed(global.Key_jump) &amp;&amp; ground &amp;&amp; (!underground) &amp;&amp; drawz == 0)
{
    ID = instance_find_top(x, y, par_floor)
    doit = 1
    if ID
    {
        if (ID.object_index == obj_spring_platform)
        {
            if ((z + height) &gt; ID.z)
                doit = 0
        }
    }
    if doit
    {
        ground = 0
        zspeed = 5
        if hasrock
            zspeed = 3
        if (global.World == 13)
            zspeed = 3.5
        index = 0
        play_sfx(sfx_jump)
        if instance_exists(obj_switch_platform_h)
        {
            with (obj_switch_platform_h)
                destrot = (destrot + 180) % 360
            play_sfx(sfx_beep)
        }
    }
}
if move
{
    if (showpowerup == 0 || (showpowerup == -1 &amp;&amp; global.Powerup == 0))
    {
        if (key_check(global.Key_up) &amp;&amp; (!key_check(global.Key_down)))
        {
            tex = tex_mario_back;
            if (!ground)
                tex = tex_mario_jump_back
        }
        else
        {
            tex = 36
            if (!ground)
                tex = 37
        }
    }
    if (showpowerup == 1 || (showpowerup == -1 &amp;&amp; global.Powerup == 1))
    {
        if (key_check(global.Key_up) &amp;&amp; (!key_check(global.Key_down)))
        {
            tex = 44
            if (!ground)
                tex = 45
        }
        else
        {
            tex = 42
            if (!ground)
                tex = 43
        }
    }
    if (showpowerup == 2 || (showpowerup == -1 &amp;&amp; global.Powerup == 2))
    {
        if (key_check(global.Key_up) &amp;&amp; (!key_check(global.Key_down)))
        {
            tex = 49
            if (!ground)
                tex = 50
        }
        else
        {
            tex = 47
            if (!ground)
                tex = 48
        }
    }
    if (showpowerup == 3 || (showpowerup == -1 &amp;&amp; global.Powerup == 3))
    {
        if (key_check(global.Key_up) &amp;&amp; (!key_check(global.Key_down)))
        {
            tex = 54
            if (!ground)
                tex = 55
        }
        else
        {
            tex = 52
            if (!ground)
                tex = 53
        }
    }
    if (showpowerup == 4 || (showpowerup == -1 &amp;&amp; global.Powerup == 4))
    {
        if stone
            tex = 59
        else if (key_check(global.Key_up) &amp;&amp; (!key_check(global.Key_down)))
        {
            tex = 60
            if (!ground)
                tex = 61
        }
        else
        {
            tex = 57
            if (!ground)
                tex = 58
        }
    }
}
if (key_check_pressed(global.Key_run) &amp;&amp; global.Powerup == 1 &amp;&amp; instance_number(obj_fireball) &lt; 2)
{
    ID = instance_create((x + xscale * 4), (y - 1), obj_fireball)
    ID.z = z + 4
    ID.dir = fdir
    ID.atk = atk
    with (ID)
        event_user(0)
    play_sfx(sfx_fireball)
}
if (key_check_pressed(global.Key_run) &amp;&amp; (global.Powerup == 3 || global.Powerup == 4))
{
    if hasrock
    {
        with (obj_giant_bowser_rock)
        {
            if (phase == 4)
            {
                phase = 5
                yspeed = -3
                zspeed = 6
                grav = 0.125
            }
        }
        hasrock = 0
    }
    else
    {
        if (underground &amp;&amp; (!(wall_detect(x, y))))
        {
            underground = 0
            mydirt.attached = 0
            mydirt.alarm[0] = 240
            mydirt.alarm[1] = 360
            mydirt.tex = 127
            mydirt.index = 0
            stone = 0
        }
        else if (underground &amp;&amp; place_meeting(x, y, obj_giant_bowser_rock) &amp;&amp; global.Powerup == 4)
        {
            underground = 0
            mydirt.attached = 0
            mydirt.alarm[0] = 240
            mydirt.alarm[1] = 360
            mydirt.tex = 127
            mydirt.index = 0
            stone = 0
            throwrock = 1
        }
        if ((!ground) &amp;&amp; (!digging))
        {
            move = 0
            alarm[6] = 15
            digging = 1
            atk += (2 + 1 * (global.Powerup == 4))
            atk_start += (2 + 1 * (global.Powerup == 4))
            if (global.Powerup == 4)
            {
                stone = 1
                tex = 59
            }
        }
    }
}
if (ground &amp;&amp; (!underground) &amp;&amp; (xaxis != 0 || yaxis != 0))
{
    ID = instance_place(x, y, obj_spring_platform)
    doit = 1
    if ID
    {
        if (zfloor == (ID.z + ID.height))
            doit = 0
    }
    if doit
        step += point_distance(0, 0, xspeed, yspeed)
}
if (step &gt; 24)
{
    step -= 24
    ID = instance_place(x, y, obj_grid_0)
    if (ID &amp;&amp; zfloor == ID.z)
        play_sfx(sfx_step_grid)
    else
        play_sfx(sfx_step)
}
if (!(place_meeting(x, y, obj_koopa_shell)))
    cangethit = 1
ID = instance_place(x, y, obj_quicksand)
if ID
{
    if (ID.z == z)
        y += 0.25
}
ID = instance_place(x, y, obj_conveyer_belt)
if ID
{
    if (ID.z == z)
    {
        if (!(wall_detect((x - ID.spd * 0.5), y)))
            x -= (ID.spd * 0.5)
    }
}
if place_meeting(x, y, obj_conveyer_belt_right)
{
    ID = instance_find_top_from_z(x, y, z, obj_conveyer_belt_right)
    if (ID.z == z)
    {
        if (!(wall_detect((x + (lengthdir_x(ID.spd, ID.dir))), (y + (lengthdir_y(ID.spd, ID.dir))))))
        {
            x += ((lengthdir_x(ID.spd, ID.dir)) * 0.25)
            y += ((lengthdir_y(ID.spd, ID.dir)) * 0.25)
        }
    }
}
if ground
{
    if place_meeting(x, y, obj_ice)
        ice = 1
    else
        ice = 0
}
if underground
{
    if (drawz &gt; ((-height) - 4))
        drawz -= 2
}
else if (drawz &lt; 0)
    drawz += 2
if (zspeed &lt; -4)
    zspeed = -4
if (global.World == 13)
{
    if (zspeed &lt; -2)
        zspeed = -2
}
if key_check_pressed(global.Key_start)
    instance_create(x, y, obj_pause)
if (instance_exists(obj_special_pipe) &amp;&amp; ground)
{
    if (obj_special_pipe.zspeed == 0 &amp;&amp; point_distance(x, y, (obj_special_pipe.x + 16), (obj_special_pipe.y + 16)) &lt; 8)
    {
        x = obj_special_pipe.x + 16
        y = obj_special_pipe.y + 16
        instance_destroy()
        ID = instance_create(x, y, obj_final_mario)
        ID.z = z
        ID.xscale = xscale
        ID.angle = angle
        obj_hud.alarm[0] = -1
    }
}
zprev = z
z += zspeed
zspeed -= grav
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(0, 0, obj_cam)
instance_create(0, 0, obj_hud)
instance_create(x, y, obj_fade_in)
tile_layer_hide(100)
tile_layer_hide(150)
with (obj_gcontrol)
    event_user(0)
if (global.Cp &amp;&amp; global.Restart)
{
    global.Restart = 0
    x = obj_cp.x
    y = obj_cp.y + 32
    if (global.World == 9)
    {
        with (obj_temple_door)
        {
            if (x &lt; (other.x + 128))
                instance_destroy()
        }
        with (obj_flipswitch_area)
        {
            if (x &lt; (other.x + 128))
                solved = 1
        }
        with (obj_flipswitch)
        {
            if (x &lt; (other.x + 128))
            {
                tex = sprite_get_texture(tex_flipswitch, 2)
                solved = 1
            }
        }
    }
    alarm[2] = 1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!doalign)
{
    if (global.Powerup == 2 &amp;&amp; (!ground))
    {
        destindex = (flying == 1) * 2
        if (index != destindex)
            index += ((sign(destindex - index)) * 0.25)
    }
    else
    {
        if (!donthide)
            index += ((point_distance(0, 0, xspeed, yspeed)) * 0.1)
        index += (abs(yyspeed) * 0.1)
    }
}
if (!underground)
    d3d_draw_shadow((x - 8), (y - 8), (drawzfloor + 0.2), (x + 8), (y + 8), (drawzfloor + 0.2), 1)
if place_meeting(x, y, obj_bridge_switch)
{
    if (drawzadd &lt; 3)
        drawzadd += 0.75
}
else if (drawzadd &gt; 0)
    drawzadd -= 0.75
if donthide
    d3d_set_hidden(0)
d3d_transform_set_identity()
d3d_transform_add_rotation_z(angle + obj_cam.camdir - 270 + digrot + drawz * -9 * (!underground) * xscale)
d3d_transform_add_translation(x, y, (z + drawz + drawzadd))
if (vis &amp;&amp; drawz &gt; ((-height) - 4))
    d3d_draw_wall(-16, 0, 32, 16, 0, 0, sprite_get_texture(tex, index), 1, 1)
d3d_transform_set_identity()
d3d_set_hidden(1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>8,8</point>
  </PhysicsShapePoints>
</object>
