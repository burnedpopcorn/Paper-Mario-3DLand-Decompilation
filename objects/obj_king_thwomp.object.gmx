<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_platform_0</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>par_boss</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>z = 0
zfloor = 0
zspeed = 0
grav = 0
height = 48
rot = 0
chase = 0
dorotate = 0
spd = 1.8
burnt = 0
makewave = 0
canhitfloor = 1
hp = 32
atk = 9
tex = sprite_get_texture(tex_king_thwomp, 0)
tex2 = sprite_get_texture(tex_king_thwomp, 1)
tex3 = sprite_get_texture(tex_crown, 0)
wall = instance_create(x, y, obj_wall)
wall.sprite_index = sprite_index
wall.z = z + height
wall.bottom = z
wall.dir = -1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>zspeed = 0
grav = 0.125
canhitfloor = 0
with (obj_grid_0)
{
    if place_meeting(x, y, other)
        event_user(0)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>obj_mario.move = 0
instance_create(x, y, obj_star_fade_out)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>burnt = 2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>zspeed = 1
alarm[3] = 60
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>zspeed = 0
grav = 0.125
burnt = 0
canhitfloor = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>zspeed = 1
timeline_index = tl_king_thwomp
timeline_running = 1
play_bgm(bgm_boss, true)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var ID;
find_zfloor()
if (hp &lt;= 0)
    exit
if (x &lt; (xstart - 72))
    x = xstart - 72
if (x &gt; (xstart + 72))
    x = xstart + 72
if (y &lt; (ystart - 8))
    y = ystart - 8
if (y &gt; (ystart + 72 + 64))
    y = ystart + 72 + 64
if (z &lt; 0 &amp;&amp; canhitfloor)
{
    if (collision_point(x, y, obj_grid_0, 0, 0) &amp;&amp; collision_point((x + 47), y, obj_grid_0, 0, 0) &amp;&amp; collision_point(x, (y + 47), obj_grid_0, 0, 0) &amp;&amp; collision_point((x + 47), (y + 47), obj_grid_0, 0, 0))
    {
        with (obj_grid_0)
        {
            if place_meeting(x, y, other)
                alarm[1] = 4
        }
        z = 0
        zspeed = 0
        grav = 0
        play_sfx(sfx_step_grid)
        alarm[5] = 30
    }
    else if place_meeting(x, y, par_floor)
    {
        timeline_running = 1
        timeline_position = 500
        z = 0
        zspeed = 0
        grav = 0
        play_sfx(sfx_crush)
        cam_shake(4)
        if makewave
        {
            makewave = 0
            ID = instance_create((x + 24), (y + 24), obj_wave)
            ID.z = z
            cam_shake(12)
        }
    }
}
if (z &lt; -16)
{
    z = -16
    zspeed = 0
    grav = 0
    burnt = 1
    makewave = 1
    play_sfx(sfx_stomp)
    hp -= 8
    ID = instance_create((x + 24), (y + 24), obj_damage_star)
    ID.z = z + 24
    ID.damage = 8
    with (ID)
        event_user(0)
    timeline_running = 0
    if (hp &lt;= 0)
    {
        zspeed = -0.5
        audio_stop_sound(global.Bgm)
        alarm[4] = 120
    }
    else
    {
        alarm[1] = 240
        alarm[2] = 60
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var tdir, xspd, yspd, col, col2;
if (burnt == 2)
{
    tdir = point_direction(x, y, xstart, ystart)
    xspd = lengthdir_x(spd, tdir)
    yspd = lengthdir_y(spd, tdir)
    if (abs(x - xstart) &gt; xspd)
        x += xspd
    else
        x = xstart
    if (abs(y - ystart) &gt; yspd)
        y += yspd
    else
        y = ystart
}
if (chase &amp;&amp; instance_exists(obj_mario))
{
    tdir = point_direction((x + 24), (y + 24), obj_mario.x, obj_mario.y)
    xspd = lengthdir_x(spd, tdir)
    yspd = lengthdir_y(spd, tdir)
    col = place_meeting(x, y, obj_mario)
    if (abs(x + 24 - obj_mario.x) &gt; xspd)
        x += xspd
    else
        x = obj_mario.x - 24
    if (abs(y + 24 - obj_mario.y) &gt; yspd)
        y += yspd
    else
        y = obj_mario.y - 24
    col2 = place_meeting(x, y, obj_mario)
    if (col2 &amp;&amp; (!col) &amp;&amp; (obj_mario.z + obj_mario.height) &gt;= z &amp;&amp; obj_mario.z &lt;= (z + height))
    {
        obj_mario.x += xspd
        obj_mario.y += yspd
    }
}
zprev = z
z += zspeed
zspeed -= grav
if dorotate
    rot += 9
else
    rot = 0
wall.x = x
wall.y = y
wall.z = z + height
wall.bottom = z
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>d3d_transform_set_identity()
d3d_transform_add_rotation_z(rot)
d3d_transform_add_translation((x + 24), (y + 24), z)
if burnt
    draw_set_color(c_red)
d3d_draw_wall(-24, -24, 48, -24, 24, 0, tex, 1, 1)
d3d_draw_wall(-24, 24, 48, 24, 24, 0, tex, 1, 1)
d3d_draw_wall(24, 24, 48, 24, -24, 0, tex, 1, 1)
d3d_draw_wall(24, -24, 48, -24, -24, 0, tex, 1, 1)
d3d_draw_floor(-24, -24, 48, 24, 24, 48, tex2, 1, 1)
d3d_draw_floor(-24, -24, 0, 24, 24, 0, tex2, 1, 1)
d3d_draw_wall(-12, 0, 72, 12, 0, 48, tex3, 1, 1)
draw_set_color(c_white)
d3d_transform_set_identity()
d3d_transform_add_rotation_z(rot)
d3d_transform_add_translation((x + 24), (y + 24), zfloor)
d3d_draw_shadow(-24, -24, 0.2, 24, 24, 0.2, 0)
d3d_transform_set_identity()
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>24,24</point>
  </PhysicsShapePoints>
</object>
